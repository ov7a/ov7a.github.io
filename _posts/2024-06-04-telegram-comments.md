---
layout: post
title: Комменты телеграма на сайте и похвала роботам
tags: [blogdev, telegram, ai, мысли]
category: blog
tg_id: 517
---
На выходных удалил комментарии от телеги с сайта (которые [comments.app](https://comments.app)). API и возможности администрирования с 2020 года совсем не изменились: например, до сих пор нельзя посмотреть все комменты на сайте. Да и не пользовался ими никто — ровно один комментарий был не от меня. Старые комменты спарсил краулером, написанным ChatGPT.

Нашел как [подключить комментарии](https://github.com/ov7a/ov7a.github.io/commit/b60c5104a266e1240b888191e2fe2575850fc8e9) из канала. Повспоминал свои [боли](/2020/04/06/github-pages.html) с Jekyll. С точки зрения самой телеги оказалось довольно [нетривиально](https://core.telegram.org/api/links#message-links) понять, как сделать так, чтобы была ссылка вела сразу на дискуссию с комментариями, а не тупо на пост. В итоге тупо вставил ссылку в конце поста, на компе работает, но на планшете — нет (не открывает комментарии, только пост). ¯\\\_(ツ)\_/¯

Увы, нельзя комментировать старые посты, потому что для них нет соответствующего поста в группе обсуждений. Ну и фиг с ними, все равно их никто не читает :) Паравозиком приехала ссылка на комменты с Хабра (тоже не знаю зачем, даже я уже Хабр практически перестал читать).

Осталось дело за малым — добавить везде ID поста в телеге. Это [около 250](https://github.com/ov7a/ov7a.github.io/commit/9047b23a7143deb02d138916228927f41cf5ce48) файлов, и там не просто подряд числа. Тут очень хорошо повкалывал ChatGPT, прям аж похвалить его захотелось: всего за 3-4 итерации генерировал рабочие решения на питоне, причем мне даже особо не нужно было читать код.

В итоге все посты из телеги сохранил через экспорт канала (с доступом через API [нахвался](/2024/01/18/telegram-ban.html) уже), потом сопоставил их с постами с сайта по заголовку. Часть файлов обновил руками — там заголовки не совпадали или были проблемы из-за кавычек. На все-про-все ушло минут 10, и это классно.

Немного напортачил с переносом строк. Хотел поправить башем, но ChatGPT внезапно отупел и его предложения не работали. Оказалось, что кончились токены на 4 версию. Т.е. если предыдущие версии я в основном ругал, то от четвертой в основном положительные впечатления остались. 

Еще я сделал тупую опечатку, которую нашел не сразу. В итоге больше всего потратил на обработку крайних случаев, тупую опечатку и приколы с экранированием. Иронично, что первый пост, к которому можно оставить коммент — "[Самые сложные проблемы в разработке](/2021/11/30/hard-problems-of-development.html)" (ладно, для душнил есть еще [пост](https://t.me/minutkaprosvescheniya/249) про открытие комментариев). Но в целом результатом я доволен, наконец-то почувствовал продуктивность с ChatGPT. Сам подход напомнил [скачивание архива](/2020/12/19/downloading-vk-album.html) — тоже из говна и палок, "лишь бы работало".

![](/assets/gags/2024-06-03-dendrofecal-stonks.png)

 

