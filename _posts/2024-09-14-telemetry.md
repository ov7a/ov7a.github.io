---
layout: post
title: Про телеметрию
tags: [privacy, bestpractices, мысли]
category: blog
tg_id: 550
---
TLDR: следить за пользователями — это обычно плохая идея.

Вроде бы это должно быть очевидно (с точки зрения пользователя), но у всяких там продактов иногда возникает соблазн "собрать немного данных". 
Поэтому некоторое время назад я решил поисследовать эту тему поглубже, чтобы иметь более аргументированную позицию.

## Источники

Есть отличная [серия постов](https://research.swtch.com/telemetry) от разработчика Go, в которой разобраны плюсы телеметрии, аргументы за нее и обозначены лучшие практики по ее внедрению. 
Вкратце:
* Баг-репорты содержат недостаточно информации.
* Опросы пользователей содержат недостаточно информации и нерепрезентативны.
* Многие негативно относятся к телеметрии из-за в основном предубеждений и стереотипного мышления ("они собирают каждый наш клик!"), но в некоторых случаях это вовсе не преувеличение.
* Без статистики использования непонятно, какие функции используются/нужны, а какие нет, и время разработчиков может быть потрачено впустую.
* Пользователи не знают, как должно вести себя ПО, поэтому не дают достаточно хорошие баг-репорты, а некоторые проблемы могут остаться незамеченными несколько релизов.
* Телеметрия должна быть прозрачной: надо собирать как можно меньше данных, показывать пользователю, что собирается, не содержать идентификаторов, ее должно быть легко отключить, данные должны быть текстовыми.
* Решение о внедрении телеметрии должно быть публичным.
* Собирать со всех все не нужно, достаточно сравнительно небольшой выборки для репрезентативных данных.
* С каждой установки данные собираются не постоянно, а изредка.
* Все собранные данные должны быть публичны.
* Телеметрия должна быть включена по умолчанию, но ее отключение должно быть простым.

Последний пункт был отредактирован, потому что после [обратной связи от сообщества](https://github.com/golang/go/discussions/58409) разработчики [решили отключить](https://research.swtch.com/telemetry-opt-in) телеметрию по умолчанию, т.е. пользователь должен осознанно ее включить.
Вообще, opt-in (телеметрия по умолчанию выключена) против opt-out (включена по умолчанию) — один из ключевых вопросов в этой теме.
В этой же серии постов можно прочитать про это подробнее: тяжелее получить данные, надо пиарить подключение, согласившимся нужно будет чаще посылать данные, будет перекос в собранных данных и т.п.

А есть [мнение](https://twi.github.io/blog/making-go-telemetry-opt-in-is-a-mistake.html), что замена на opt-in сделает телеметрию бесполезной.
Т.е. по сути opt-out — плохо для пользователей, а opt-in — бесполезно для разработчиков.
Но в той же статье есть и аргументы за телеметрию, причем в оригинальном видении из цикла статей. 
При этом отмечается, что не последнюю роль в негативной реакции сообщества сыграло то, что автор предложения работает в Гугле (а он уже давно не "don't be evil").

Разработчики Audacity хотели внедрить телеметрию, но в итоге после [негативной реакции пользователей](https://github.com/audacity/audacity/pull/835) пришли к [более скромному варианту](https://github.com/audacity/audacity/discussions/889), который покрывает только вопрос более подробных баг-репортов.

Некоторые [аргументируют](https://blog.glyph.im/2023/03/telemetry-is-not-your-enemy.html), что телеметрия бывает разной, и не вся телеметрия — это слежка, а стоит думать о ней как о голосовании, мол, ваш "голос" будет учтен.
И вообще, open source разработчикам тяжелее получать данные о пользователях, чем разработчикам проприетарного ПО.

Если почитать статьи про телеметрию с более пользовательской точки зрения, то там будут в основном негативные или язвительные комментарии. 
Примеры:
* [Telemetry is definitely your enemy](https://www.reddit.com/r/privacy/comments/15mjv7j/telemetry_is_definitely_your_enemy/)
* [The Telemetry Fallacy](https://www.hendrik-erz.de/post/the-telemetry-fallacy)
* [Fedora Project mulls 'privacy preserving' usage telemetry](https://www.theregister.com/2023/07/10/fedora_privacy_telemetry/)

Отдельно можно отметить комментарии на HackerNews, тысячи их:
* [1Password](https://news.ycombinator.com/item?id=35691383)
* [Fedora](https://news.ycombinator.com/item?id=36630032)
* [Firefox](https://news.ycombinator.com/item?id=21259359)
* [Go](https://news.ycombinator.com/item?id=34707583)
* [драйверы на видеокарты от Intel](https://news.ycombinator.com/item?id=37060226)

Там есть мнения как с точки зрения пользователя, так и с точки зрения разработчика.

Я постарался как-то это все агрегировать ниже.

## Аргументы "за"

Вкратце: Больше данных хорошо, проще получать инсайты, проще приоритизировать задачи и развивать продукт.

* Без телеметрии невозможно собрать статистику об использовании продукта.
  * Статистика использования позволяет приоритизировать разработку функциональности.
  * Статистика позволяет удалить ненужную функциональность без негативных последствий.
* Люди лгут, телеметрия — нет. Опросы пользователей содержат недостаточно информации и нерепрезентативны.
* Телеметрия позволяет обнаруживать проблемы, о которых люди и не задумывались.
* С телеметрией предоставляется больше данных чем в обычных баг-репортах.
* Баг-репорты требуют усилий и не все пользователи их отправляют/могут отправить, телеметрия экономит усилия пользователя по отправке данных.
* Телеметрия позволяет делать более надежные продуктовые решения. Без данных принимаются плохие решения.
* Телеметрия — это способ "голосования" людей за улучшения в продукте.
* Обратную связь разработчики получают только от самых "говорливых" пользователей, а с телеметрией — от всех.
* Понять сценария использования системы и интегрировать эту информацию в процесс разработки и тестирования весьма тяжело без метрик.
* Тяжело тестировать оптимизации ПО без метрик с пользовательских машин, держать парк своих серверов для тестирования производительности — дорого.
* Телеметрия может помочь создать более прибыльный продукт.
* Все веб сервисы и так собирают данные при каждом обращении к сервису, чем телеметрия хуже?
* Большинству пофигу на "приватность".

## Аргументы "против"

Вкратце: данных и так полно, качество данных от телеметрии сомнительно по многим причинам и не даст всей картины, на основе телеметрии можно сделать неверные выводы, надо думать о ИБ. 

* У вас и так полно данных о платформах, которые вы получаете от статистики установок, User-agent и т.п. Интернет так работает и всех это устраивает, т.к. большинство понимает, что посылается и когда. Активная отсылка данных с клиента — плохо, потому что это вторжение на пользовательский клиент, которое пересекает границу, созданную браузером/протоколами.
* Обложите бекэнд [трейсингом](/2022/08/23/open-telemetry.html), и получите дофига данных.  
* Если у вас не веб-приложение, то вместо телеметрии можно добавить функциональность по отправке ошибок.
* Если у вас не веб-приложение, то возможно ваши пользователи достаточно умны, чтобы написать нормальный баг-репорт.
* Если вы не знаете, как работает ваш продукт или [что нужно пользователям](/2024/01/25/prioritization.html), то телеметрия не решит проблемы вашей разработки. Наймите нормального продакта и нормально делайте исследование своих пользователей, прежде чем внедрять телеметрию. Желание внедрить телеметрию может быть сигналом о том, что продукт стал таким сложным и/или хрупким, что пользователи не напрягаются давать обратную связь. Или отправить баг так сложно, что никто этим не заморачивается.
* Просто данных недостаточно для того, чтобы делать какие-то выводы. Нужно строить гипотезы и подтверждать их, иначе это будут просто догадки. Легко "переоптимизировать". Любая метрика перестает быть хорошей когда она становится самоцелью. Для оценки качества есть соблазн использовать эту же метрику. Телеметрия не покажет ни намерений, ни эмоций пользователя.
* Если фича редко используется, это не значит, что ее можно удалить (аргумент про огнетушитель и бэкапы).
* Телеметрия может быть формой дискриминации: "только 5% пользователей пользуется фичей, давайте ее удалим" или "если ты не шлешь телеметрию, то твое мнение не учитывается".
* Разработчики опенсорса не должны заботиться о том, как используют их бесплатное ПО пользователями, которые ничего не дают им взамен. А ответственные пользователи помогают проектам, открывая пулл-реквесты и баг-репорты.
* Телеметрию нельзя использовать на удаленной фиче или на желаемой фиче, для этого надо использовать другие источники информации и знать своего пользователя.
* С телеметрией легко скатиться к "среднему пользователю" и "среднему по больнице", что [обычно плохо](https://medium.com/continuousdelivery/no-one-size-fits-all-d7ad0a8cbe7b). 
* Для новой фичи данные будут искажены из-за ранних пользователей и не дадут хорошей картины.
* У вас и без данных от телеметрии полно работы (кто-нибудь работал в успешном продукте, где не было большого бэклога?). Если у вас есть четкое видение продукта и вы нормально исследуете пользователей, то у вас достаточно и работы и приоритетов.
* Многие продукты больших компаний (Google, Facebook и т.п.) обложены телеметрией — [становятся ли они со временем лучше](/2024/01/25/prioritization.html)? Точно ли телеметрия дает выгоду пользователю?
* Анонимизация снижает качество собираемых данных, но при этом способы деанонимизации совершенствуются. Т.е. если данные нормально анонимизировать, то они станут бесполезны, а если это не делать — то это нарушит приватность пользователей. Некоторые еще переживают, что с ИИ анонимность вообще недостижима, а пользователей с уникальными (странными) окружениями легко сдеанонить [фингерпринтингом](/2023/03/28/fingerprinting.html).
* Если продукт с открытым исходным кодом, то легко его модифицировать, чтобы посылать мусор вместо данных.
* Компании плохо заботятся о ИБ, данные пользователей рано или поздно утекут. Даже если собираемые данные надежно защищены, не факт, что это не поменяется в будущем или что они не будут слиты по первому запросу госорганам.
* Opt-out — плохо для пользователей, а opt-in — бесполезно для разработчиков.
* Opt-out — в серой зоне с точки зрения легальности (с точки зрения GDPR и конвенций ООН).
* Телеметрия выгодна только разработчикам и нужна, чтобы сократить расходы.
* Телеметрия может быть первым шагом к агрессивной монетизации и сместит фокус разработчиков на платных пользователей. Будут внедрятся только те фичи, которые прибыльны, а не те, которые полезны пользователям.
* Телеметрия должна быть прозрачной, но публичные данные о статистике пользователей могут быть использованы против вашей компании.
* Если продукт был успешен X лет без телеметрии, то действительно ли она необходима? Как-то же справлялись разрабы раньше без нее.
* Всегда будут люди, которые откажутся от телеметрии, и это чаще продвинутые пользователи. А еще телеметрию может быть заблокирована блокировщиком рекламы, если у вас веб-приложение.
* Телеметрия — потенциальная брешь в системе, как со стороны клиента, так и сервера, и увеличивает поверхность атаки.
* Телеметрия — это доп. расход ресурсов, как пользователя, так и компании. Если все программы будут собирать телеметрию, приведет ли это к чему-то хорошему? Чем ваше приложение такое особенное, чтобы делать это?
* Если решение принимается децентрализовано, сообществом, то будет достаточно мнений, чтобы обойтись без телеметрии.

## Итого

В основном телеметрию хотят разработчики, а пользователи (которые высказывают свое мнение) в целом против нее.

Большинству пользователей на все выше скорее всего насрать. 
Приложения на телефоне и какой-нибудь поиск гугла или хром собирают о вас столько данных, что вас можно будет заменить роботом и никто не заметит.
Ну и, увы, как-то странно верить, что в мире осталась какая-то приватность, когда каждое устройство и программа что-нибудь собирают, улицы обвешаны камерами, а товар в бесплатных сервисах — это вы.

Доверие очень тяжело заслужить и легко потерять ("и невозможно забыть":) ).
Если прям надо-надо телеметрию, то лучше быть максимально прозрачными и следовать советам от разработчиков Go, а насчет opt-in или opt-out — думать, что лучше подходит.
Но в первую очередь стоит подумать, а точно ли она нужна вообще (скорее всего нет). 
С ее помощью можно получить какие-то данные, но у них может быть сомнительное качество.

> The more these things are happening and the more I read about it, the more I understand and agree with Richard Stallman.

