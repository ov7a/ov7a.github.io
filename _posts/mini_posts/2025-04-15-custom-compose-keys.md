---
layout: post
title: Кастомные комбинации для Compose Key
tags: [linux, unicode, util]
tg_id: 610
---
Понадобилось мне упростить себе ввод, да еще и экзотическим способом — хочу быть владычицей морскою, которая может на русской раскладке писать ј, ћ, џ, ђ и прочие славянизмы. 

Разумеется, вспомнил про [Compose Key](/2020/05/19/compose-key.html) — не зря блог веду, получается! :). Сначала попробовал найти готовые комбинации — все стандартные комбинации можно посмотреть в файлах локали(ей):
```sh
cat /usr/share/X11/locale/en_US.UTF-8/Compose | grep č
```
И если для латиницы все в порядке, то ћ не будет ни в латинской раскладке, ни в русской. Придется делать самостоятельно.

Для этого нужно создать `~/.XCompose` и добавить туда сначала `include "%L"`, чтобы работало все стандартное, а потом свои правила, например
```
<Multi_key> <Cyrillic_CHE> : "Ћ" U040B
```
Тут `<Multi_key>` — это собственно Compose Key, `<Cyrillic_CHE>` — заглавная Ч, а `U040B` — код для Ћ. Чтобы узнать обозначение для Ч, можно использовать `xev | grep keycode`. А чтобы узнать код для символа (и заодно найти его) — есть встроенное приложение Character Map, можно воспользоваться онлайн-таблицами вроде [этой](https://unicodelookup.com/#Cyrillic/1) или чуть более прикольными [штуками](https://shapecatcher.com/), которые распознают рукописные символы.

Увы, чтобы протестировать все это безобразие, придется разлогиниться и залогиниться снова, какого-то более простого способа я не нашел.

Но в итоге [все получилось](https://gist.github.com/ov7a/bc9da1e620b61f3308f449e55388a06b), я доволен.
