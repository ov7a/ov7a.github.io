---
layout: post
title: Эмулятор андроида
tags: [android]
---
Захотел я тут одно мобильное приложение запустить на компе. Думаю — ну, в 2020 живем, сейчас минут за 10 скачаю эмулятор какой-нибудь и запущу. Смотрим на варианты эмуляторов: этот платный, этот облачный, для этого виртуалку качай, этот — только для винды и мака, один так вообще плагин к браузеру, этот — порт системы под x86, который ставить отдельно с загрузочной флешки. В общем, "богатый" выбор. В итоге остановился на [Anbox](https://anbox.io/).

Поставить его проблем особых нет:
```bash
snap install --devmode --beta anbox
sudo apt install android-tools-adb
```
Все довольно быстро, можно потыкать в стандартные приложения, вроде как работает. Потом качаю apk через [apkcombo](https://apkcombo.com/ru-ru/apk-downloader/) или [evozi](https://apps.evozi.com/apk-downloader/), ставлю через
```bash
adb install apk_name.apk
```
И, разумеется, наступаю на грабли `INSTALL_FAILED_NO_MATCHING_ABIS`. Ну ок, проблема в архитектуре проца. Пробую для x86 скачать apk — те же грабли. Но можно поставить [слой совместимости](https://github.com/geeks-r-us/anbox-playstore-installer) и после этого приложения ставятся и даже запускаются. Однако целевое приложение мне выдало какую-то свою ошибку. Решил проверить на чем-нибудь поинтереснее: ночная сборка Firefox запустилась, но вместо сайта показывает белый экран. А рандомная игруля (Plants vs Zombies) вообще не запустилась. Пару раз при этом эмулятор падал. Думаю ­— ну ладно, кривая фигня, попробую лучше "официальный" эмулятор — Android SDK.

Надо скачать Android Studio, через нее скачать пару миллиардов гигов зависимостей, потом найти, где собственно закопан эмулятор, и запустить его через командную строку (впечатляющий UX). Система запустилась, тыкать в нее по-прикольнее, чем в Anbox, но как домашний экран провертеть до приложений, я так и не разобрался, запускал все через настройки. Установка приложений тоже закончилась весело: я попробовал 4 комбинации apk и архитектуры (x86/arm) и ни одна не сработала. Два варианта ошибки: `Segmentation fault (core dumped)` и `Couldn't parse error message` (еще один впечатляющий UX). Понятия не имею, как люди могут использовать этот эмулятор для разработки.

Возможно, у этой истории будет продолжение (я уверен, что это случай "информация была дана, вы не разобрались"), но сейчас у меня от нее пригорело, и пробовать что-то еще сил уже нет.

