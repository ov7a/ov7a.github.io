---
layout: post
title: Проверка простоты числа с помощью регулярки
tags: [math, regex]
tg_id: 260
---
```python
def is_prime(n):
    return re.match(r'^1?$|^(11+?)\1+$', '1' * n) is None
```
Забавный, хоть и не очень оптимальный способ проверки числа на простоту. Сложность большая, т.к. по сути все числа последовательно перебираются, да потом проходится вся строка заново. Регулярка довольно старая, можно найти упоминания еще в [1998](http://diswww.mit.edu/pergamon.mit.edu/perl/10138).

Идея довольно простая. Сначала число переводится в [унарную систему](https://ru.wikipedia.org/wiki/%D0%A3%D0%BD%D0%B0%D1%80%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F). Обрабатывается особый случай: единица — это не простое число (а в давние времена даже числом не было). После этого ищется подстрока из двух и более единиц, которая потом повторяется хотя бы один раз, что эквивалентно тому, что число можно записать как сумму одинаковых чисел, больших двух, т.е. произведение.

