---
layout: post
title: Об одном нестабильном браузерном тесте
tags: [frontend, testing]
tg_id: 629
---
У меня с браузерными тестами и selenium в частности весьма неоднозначные отношения: с одной стороны — автоматическое тестирование — это хорошо, с другой — много видимых пользователю косяков можно легко пропустить (т.е. руками все равно надо будет тестировать) и, по моему опыту, тесты очень хрупкие.

И вот была у меня недавно проблема с частью браузерных тестов уровня "нажми сюда и попадешь на эту страницу": в CI работает, локально — нет: остается на той же странице. В логах пусто, никаких индикаторов о том, что происходит — нет. Некритично, но неприятно. Потратил кучу времени: может не нажимается? Нажимается, но не работает. Пробовал и так, и сяк (рандомные советы из интернетов) — не работает и все. Я мужественно забил и отложил эту проблему на пару месяцев.

Недавно, после очередного обновления хрома (в котором у нас тестируется) и селениума опять запустил тесты — и, в headless-режиме, который не подразумевает никакого интерфейса, вижу, как мелькает окошко от хрома — твой пароль небезопасен!!1. И правда, в тестах логина, которые локально не работали, использовался `p@ssw0rd`. Заменил его на "более сильный" (хотя надо было бы генерировать, по-хорошему), и тесты "починились". Т.е. благодаря багу хрома я смог обнаружить проблему, о которой не сообщал selenium :/
