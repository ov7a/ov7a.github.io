---
layout: post
title: Насколько уникален UUID?
tags: [math]
---
Напомню, что UUID — это идентификатор вида `ac2c6d9a-68d0-4802-948b-da8cc594ac80`, который содержит 16 байт или 128 бит. При этом в 4 версии из этих 128 бит только 122 случайны (и генерируются обычно хорошим генератором случайных чисел), остальные 6 — это 4 для номера версии и 2 зарезервированных бита.

Чтобы оценить вероятность совпадения, можно воспользоваться формулой для "парадокса" дней рождения, а именно ее приближением:
```
p(n, b) =  1 - e^(-n(n-1)/2^(b+1)))
```
где `n` — количество сгенерированных элементов, а `b` — количество случайных бит (`2^b` — количество вариантов).

Дальше надо прикинуть, сколько будет UUID в системе. Пусть нагрузка на систему — 1000 RPS, и при каждом запросе генерируется новый UUID. Тогда за 1000 лет будет сгенерировано всего 31,5 триллиона идентификаторов, а вероятность, что будет пара одинаковых — всего `9*10^-11`, чем можно спокойно пренебречь.

