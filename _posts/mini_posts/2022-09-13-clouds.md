---
layout: post
title: Не деплойте в облака пацаны, вы матерям еще нужны
tags: [devops, мысли]
---
Вообще на первый взгляд развернуть в облаке сервис звучит как неплохая идея — зачем тратить время на трахание с железом или с настройкой какой-то базы, когда можно "потыкать пару кнопочек" и все будет работать "само". Тем более, что в облаке сейчас уже есть почти все: базы на любой вкус, куберы всякие, CDN, OAuth, метрики, аналитики, сертификаты, хранилища секретов и т.д., даже бэкенд целиком можно себе накликать (см. [Firebase](https://firebase.google.com/) или [AWS Amplify](https://aws.amazon.com/ru/amplify/)). Все это с интеграцией между собой и кучей плюшек из коробки.

Однако "all magic comes with a price": 
1. Трахание с железом и сервисами на самом деле заменяется на трахание с настройками и нюансами облачного провайдера. Причем если опыт с сервисами и железом плюс-минус переносимый, то у каждого провайдера свои приколы, разумеется.
2. Отдельно выделю вопросы распределения ролей, настроек доступов и прочих аспектов связанных с ИБ. Про свой опыт с гуглом [уже рассказывал](/2021/06/10/google-calendar.html). Во всем это зрелый DevOps может на неделю сгинуть для простой задачи, а разраб — вообще умереть.
3. Облачные версии сервисов часто представляются собой форк опенсорсных со своими "расширениями" (например, амазоновский OpenSearch — это форк ElasticSearch), обычно от старой версии. Иногда присутствует [EEE](https://ru.wikipedia.org/wiki/Embrace,_Extend,_and_Extinguish) во всей красе. Причем расширения обычно нужны для интеграции в облачную экосистему и хреново поддерживаются, а решение для опенсорсного варианта может не подойти для облачного. 
4. Поскольку сервисом управляете не вы, то может не получится его тонко настроить или поставить какие-нибудь плагины. 
5. Как следствие, возникает привязка к облачному провайдеру, когда съехать с облака становится очень дорого, потому что все настройки или даже архитектура заточены под него.
6. Условия могут внезапно поменяться к худшему и это может быть затратно (например, недавно Heroku [убрал бесплатный тариф](https://blog.heroku.com/next-chapter))
7. Конфиденциальность — гомоморфное шифрование пока не применяют, так что облачный провайдер имеет доступ ко всем данным.
8. Если что-то сломается, то вы ничего не сможете с этим поделать, только ждать и надеяться, что все будет быстро исправлено.
9. Ложная уверенность в 100% надежности облака могут привести к тому, что ночью никто не будет дежурить и следить за работоспособностью сервиса (впрочем, и без облаков это можно делать).

Получается, что если вы делаете что-то стандартное, то облака дают быстрый и (иногда) дешевый старт, а с ростом будете наталкиваться на ограничения. Тогда уже и стоимость будет выше, и слезть с облаков будет тяжело. Но для какого-нибудь пет-проекта или эксперимента это может и нормально. Может, я старомоден, но мне кажется, что купить/арендовать железку в дата-центре хоть и будет дороже в краткосрочной перспективе, но даст больше преимуществ и гибкости в долгосрочной. Крупняки так вообще свои облака строят.

