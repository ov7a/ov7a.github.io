---
layout: post
title: Будущее эффектов
tags: [scala, фп]
---
Интересная [статья](https://softwaremill.com/the-future-of-effects-in-scala/) про будущее работы с эффектами в Scala. Это своего рода продолжение обсуждения про [добавление `suspend`-функций](/2022/07/19/scala-suspend.html) и [про новые подходы к обработке ошибок](/2021/10/28/scala-checked-exceptions.html).

Один из главных выводов статьи: асинхронные функции — это решение проблемы, однако у сообщества нет четкого и однозначного понимания, в чем эта проблема состоит (без внятного ТЗ результат ХЗ).

В статье затронуты такие проблемы как много способов сделать одно и то же в Scala, несовершенство двухцветной реализации корутин в Kotlin и трактовку RPC как локальных функций. Открыт вопрос, надо ли делать решение только под JVM или под все платформы, и должно ли решение быть на уровне языка или библиотек. 

Для постановки проблемы нужно понять:
1. Должны ли эффекты фигурировать в сигнатуре метода? Почти все в сообществе склоняются к "да".
2. Должна ли эта информация распространятся на вызывающие методы вплоть до точки входа? А вот тут мнения разделяются.
3. Что вообще надо отслеживать? Это занятно пересекается с п.1 Нужно ли учитывать асинхронность вычислений? А с учетом Loom? Любой ввод-вывод? Ошибки?

Обсуждение все еще в процессе. А еще Одерски запустил исследовательскую программу Caprese для поиска способов отслеживать эффекты, так что может что-то новое оттуда родится.
 
