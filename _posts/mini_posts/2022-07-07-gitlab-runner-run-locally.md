---
layout: post
title: Локальный запуск билда Gitlab
tags: [gitlab, devops, gradle]
tg_id: 314
---
Как отладить непонятную проблему в CI, если нет доступа к внутренним логам? [Запустить локально ее агент](https://stackoverflow.com/questions/32933174/use-gitlab-ci-to-run-tests-locally), благо сейчас все в контейнерах.

Но что делать, если в локально запущенном агенте билд все равно проходит? Даже если использовать агент с нужной версией? 

Один из вариантов ответа — переменные окружения, которые локально, разумеется, отличаются. Однако это легко поправить — можно запустить любую команду, которая выплевывает эти переменные (например, `env`) и скопировать себе (со всеми секретами и приватными ключами, которые любезно будут выведены). 
В моем случае проблема была в том, что кто-то запихал в переменные окружения много всего, а в одной из задач gradle они копировались в `SystemProperties`. При запуске этой задачи в отдельном процессе она тупо давилась их количеством. 

