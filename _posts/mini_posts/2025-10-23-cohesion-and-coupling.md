---
layout: post
title: Фокус модулей и связанность
tags: [bestpractices, архитектура]
tg_id: 665
---
Они же cohesion и coupling, тяжело подобрать перевод получше. Первый термин — про то, насколько близки элементы внутри модуля (например, все связанное с пользователем в одном модуле, а все с его заказами — в другом), второй — про количество связей между модулями (негоже сервису заказов лезь напрямик в БД пользователей). Считается, что в идеале должен быть сильный фокус и низкая связанность, однако только ситхи возводят все в абсолют и надо знать меру. Подробнее можно почитать в этой [годной статье](https://enterprisecraftsmanship.com/posts/cohesion-coupling-difference/).

Очень много архитектурных паттернов, по сути, стремятся достигнуть идеала. Можно сказать, что [микросервисы](/2023/04/18/microservices-vs-modules.html), [акторы](/2023/01/19/actors-for-reliable-systems.html), [чистое ядро](/2025/02/25/pure-core.html), хексагональная архитектура, слоеная/луковая архитектура и т.д. — это все попытки решения этой проблемы.

Про все это можно еще послушать в [этом докладе](https://www.youtube.com/watch?v=co3acmgP2Ng). Там есть еще интересный взгляд на Spring: классическое разделение на контроллер, сервис, репозиторий с интерфейсами — это по сути хексагональная архитектура, и одна из киллер-фич Spring в свое время была возможность инъекции зависимостей и тестирование с моками (а тестирование на серверах приложений было неудобным). Одна из основных идей заключается в том, что функциональная структура важнее технической, и если у вас домен фигово разделен, то архитектура не поможет. Помимо теории, в нем есть еще и практика: как разбить все по папкам (но до уровня удушения [этой статьи](https://habr.com/ru/articles/683456/) докладчику далеко) и как IDE может помочь с пониманием проекта. Прагматизм еще выражается в том, что не так уж и важно, что там внутри модуля, и ничего криминального в том, чтобы прямо из REST-контроллера вызвать соединение к базе, если модуль очень маленький.
