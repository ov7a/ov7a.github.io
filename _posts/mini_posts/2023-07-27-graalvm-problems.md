---
layout: post
title: Проблемы GraalVM
tags: [graalvm, scala]
---
Подкинули [доклад](https://www.youtube.com/watch?v=gmfM_pAbBdU) про использование GraalVM в Akka-проекте.

Проблема поставлена хорошо (java жрет много "лишней" памяти), но ожидал больше практики и итогового сравнения продового кода. А так докладчик показал несколько проблем, с которыми столкнулся, когда запускал демо Akka HTTP: работа с ресурсами, рефлексия, `sun.misc.Unsafe` (внезапно, в GraalVM есть monkey-patching для решения подобной проблемы), инициализация, SSL. Под конец идет сравнение времени ответа native образа, обычной JVM и "прогретой": результаты для "прогретой" JVM и native образа довольно схожи. JIT у GraalVM хуже в 65% случаев.

В целом немного противоречит моим недавним [восторгам](/2023/04/04/graalvm.html), но, справедливости ради, доклад немного старый, ну и использовать Akka сейчас для новых проектов — весьма маргинальное занятие. Однако он дает немного представления о том, чего стоит ожидать от GraalVM.
