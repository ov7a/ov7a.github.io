---
layout: post
title: Операционная система на Rust
tags: [os, rust, c, memory]
---
Не очень новый (2018), но занятный [доклад](https://www.youtube.com/watch?v=HgtRAbE1nBM) про то, стоит ли писать ОС на Rust.

Начинается с вопроса, а что такое ОС? ("если бы мы знали что это такое, мы не знаем что это такое"). Потом приводится краткая, но весьма познавательная историческая справка про историю развития ОС, в частности Mutics и Unix. 

Затем обсуждаются C, другие языки, операционные системы на них (например, ОС на java, sic!). В частности, почему какой-нибудь Go не предназначен для написания ОС (кроме "idiosyncrasies" еще мешает сборщик мусора). Ну и что C++ — хороший язык, но можно нинада.

Наконец, обсуждение переходит к Rust, его преимуществам и проблемам подхода "давайте все перепишем на Rust" в контексте ОС. Одна из основных проблем — памятью все-таки надо управлять и в Rust это тяжело сделать. Альтернатива — использовать гибридный подход: писать модули и системное ПО на Rust. В итоге в Linux [так и сделали](https://www.infoq.com/news/2022/12/linux-6-1-rust/) в конце прошлого года.

Иногда докладчик отвлекается ради баек. Например, рассказал историю, почему в C нет логического XOR: потому что для его вычисления нужны оба операнда и нельзя остановить вычисление условия раньше, как это можно сделать с логическим И или ИЛИ. Или про то, что замена AVL на B-дерево дает преимущество Rust против С, но просто так на C упорешься его писать.

